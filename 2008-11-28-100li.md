---
layout: post
title: 经典c语言100例第3题新解法
slug: 100li
date: 2008-11-28 08:11
tags: [c, javascript, algorithm]
---

最近室友突然对c语言100例感兴趣了，其中有这个一个例子。

> 【程序3】
> 
> 题目：一个整数，它加上100后是一个完全平方数，再加上168又是一个完全平方数，请问该数是多少？
> 
> 1.程序分析：在10万以内判断，先将该数加上100后再开方，再将该数加上268后再开方，如果开方后的结果满足如下条件，
> 即是结果。请看具体分析：  
> 2.程序源代码：  
>  
>     #include "math.h"
>     main() {
>         long int i,x,y,z;
>         for (i=1;i&lt;100000;i++) {
>             x=sqrt(i+100); 　　/*x为加上100后开方后的结果*/
>             y=sqrt(i+268); 　　/*y为再加上168后开方后的结果*/
>             if(x*x==i+100&amp;&amp;y*y==i+268)/*如果一个数的平方根的平方等于该数，这说明此数是完全平方数*/
>                 printf("\n%ld\n",i);
>         }
>     }
>

原版后面那么多个0让人不寒而栗，经过一翻研究，想到了这样的方法(这里用 javascript 编写)。

设此数为n, 依题得如下关系.（以下sqrt为开方）

> n + 100 = x^2^   
> n + 268 = y^2^  
> 合并得 y^2^ - x^2^ = 168  
> 显然 x &lt; y &lt; n, 为缩短查找时间, 以 x 作为循环量，则 y = sqrt(168 + x^2^)

有如下算法:

    var x, y, for (x = 10; x &lt; 50; x++) {
        y = Math.pow((168 + x * x), 0.5);
        if ((y == parseInt(y)) &amp;&amp; ((y * y - x * x) == 168))
            document.write("[" + (x * x - 100) + "]");  
    }

室友更牛，推算出这样的关系

    sqrt(a+ 100) + n= (a + 260)

而且在相当大的一个范围内，n的值不会大于7，而且a越大n就越小。

用n表示a有

> a = ((n<sup>2</sup>-168)/2n)<sup>2</sup>-100</code>

n是差量，用它做循环量，就更快了。

    for (var n = 1; n &lt; 7; n++) {    var x = Math.pow((n * n - 168) / (2 * n), 2) - 100;
        var temp = parseInt(x);
        if (x * x == temp * temp)
        document.write("[" + x + "]");
    }
